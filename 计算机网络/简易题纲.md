网络的构成要素：端，协议，通信链路
==协议的构成要素：报文的语法，语义，时序==
异步：上行和下行速率不同
带宽：链路上传输的最大速率

###### 物理媒体：同轴电缆，光纤，双绞线，无线电（卫星通信，LAN）

#### 电路交换：建立连接-通信-释放连接

​		特征：面向连接，资源独占，支持多链路，链路闲置
​		优点：实时，速度快
​		缺点：资源浪费，建立连接速度慢
​		分类：FDM频分；TDM时分

#### 分组交换：存储转发数据包，给报文分组，依次加上首部

N条链路串联时延：NL/R
优点：设计简单，利用率高，应对突发业务，动态选择路径
缺点：阻塞；丢包；无实时性

#### 分组交换的4种时延：处理时延，传输时延：数据长度/带宽（BPS），排队时延，传播时延：链路长度/速度

bps：bit/s
丢包：缓存区满，分组被遗弃

##### IP协议：5层

应用层	报文		M	
传输层	报文段	    Ht	
网络层	数据报	    Hn	
链路层	帧		   Hl	
物理层	比特流			

##### C/S结构：用户-服务器

客户请求服务器，服务器总是打开
http，ftp（**TCP**），DNS，邮件（**UDP**）
套接字socket：进程通过socket发送接收数据，socket通过IP+端口定位主机
进程寻址：通过IP+端口号寻址

#### P2P：主机之间直接通信PEER

无服务器，任意节点间直接通讯；IP地址无法改变；内存占用多；通信非持续，自扩展性

互联网传输服务模式：
TCP：有连接，可靠
UDP：无连接，不可靠

#### HTTP:==超文本传输协议==

典型端口号：80——服务器端口号
功能：服务于web
使用TCP连接：客户端请求连接-服务器接收连接-HTTP报文交换-关闭连接
HTTP连接：==持续链接与非持续链接==
下层是基于TCP传输的
无状态的应用层协议
通过URL来寻找地址：<协议>：//<主机>:<端口>/<路径>

###### HTTP请求消息：

==请求，响应==
\r回车，\n换行

```
方法	URL	版本CRLF
首部字段名：	值CRLF；
……
CRLF

得到响应代码：200	OK
			404  NOT FOUND
			400	 ERROR
			…………
```

方法：GET	PUT	DELETE	HEAD	POST（给服务器添加信息）

###### cookies：用于记录用户身份、偏好或行为

###### cache:临时数据存储器

#### 带外传输和带内传输：控制信号与传输信号分离，带内传输共享同一条通道

###### DNS：域名系统（==UDP==）

组成：域名空间，域名服务器，解析器
**功能：主机名与IP的映射，别名，负载均衡**

```
根DNS服务器——顶级域DNS服务器——权威DNS服务器——本地域名DNS服务器（二级，三级...）
```

http在用：

```
www.edu.cn
cn:顶级
edu：二级
www:三级
```

DNS不区分大小写；标点仅能使用“-”；单独标号不超63，所有标号不超255

域名解析过程：递归查询，迭代查询

DNS记录与报文：

```
DNS记录 RR格式：
name	value	type	ttl(生存时间)
对于type：
					name			value
		A			主机名			  IP地址
		NS			域名			  权威服务器主机名
		CNAME		别名			  服务器规范主机名
		MX			别名			  服务器规范主机名
```

```
DNS报文：
16bit
标记符			标志
问题数			回答RR数
权威RR数		附加RR数
		问题
		回答
		权威
	   附加消息
```

==socket：传输层与应用程序之间通过socket关联，用于区别同一主机不同进程，有唯一的端口号==

##### 复用：

有链接：源IP，源端口，目的IP，目的端口

无连接：运输层头添加 **目的IP和目的端口**

RDT：有序，无差错的到达接收端

ARQ：自动重发请求

停止等待协议：丢失一定时间之后重新发送分组
流水线协议：传送多个分组，分组有序号

GBN（回退N步）：允许N个未确认数据包，第a个pkt超时，重发
SR（选择性重传）：每个分组有单独计时器，超时重发

全双工数据：数据可以B->A,也可以A->B

**TCP报文格式**：

```
源端口			目的端口
	    序号
	    确认号
数据偏移	保留	UAPRSF  窗口
检验和			紧急指针
```
